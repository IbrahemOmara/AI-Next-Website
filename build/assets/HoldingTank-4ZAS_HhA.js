import{r as l,i as O,d as R,j as s,e as z,f as o,g as r,h as d}from"./index-rN5JyR99.js";function Y(){const[c,h]=l.useState(!0),[f,m]=l.useState(0),[v,S]=l.useState(0),[b,w]=l.useState("."),[k,I]=l.useState([]),[t,p]=l.useState("1"),[n,x]=l.useState("1"),[y,A]=l.useState(""),C=JSON.parse(localStorage.dataAuth).referId,j=e=>o.get(`${r}/User/GetAllHoldingTank?sponsorId=${e}`),{data:u,isLoading:P}=O("getAllHoldingTank",()=>j(C),{queryFn:j,refetchOnWindowFocus:!1,refetchInterval:!1});async function $(e){await o.get(`${r}/User/CheckAboutHisChildren?sponsorId=${e}`).then(({data:a})=>{a.map(g=>{g.handSide=="Left"&&(p(!0),n=="1"&&x(!1),console.log(t,n)),g.handSide=="Right"&&(x(!0),t=="1"&&p(!1),console.log(t,n))}),a.length<2&&!t&&d.warning("You can add this parent, Choose Left for child"),a.length<2&&!n&&d.warning("You can add this parent, Choose Right for child"),a.length==2&&d.error("Sorry this parent is full child")}).catch(a=>{console.log(e),console.log(a.response.data),a.response.data=="Sponsor not have children."&&d.success("Yes,You can add this parent"),x(!1),p(!1)})}async function H(e){await o.post(`${r}/User/AddParentToNewMember`,e).then(({data:a})=>{d.success("Successfully added a parent")}).catch(a=>{console.log(a),d.error(a.response.data)})}async function T(e){await o.get(`${r}/User/${e}`).then(({data:a})=>{I(a),A(a.name)}).catch(a=>{console.log(a.response.data)})}const U=e=>{c?(m(e),h(!c),S(e)):(m(""),h(!c))},L=()=>{h(!c),m("")},N=e=>{w(e)},F=async()=>{T(i.values.parentId),$(i.values.parentId)},i=R({initialValues:{parentId:"",childId:"",handSide:""},onSubmit:e=>{e.parentId=k.customerAttributeId,e.childId=v,e.handSide=b,H(e)}});return P?s.jsx(z,{}):s.jsx(s.Fragment,{children:s.jsx("section",{className:"holding-tank",id:"HoldingTank",children:s.jsxs("div",{className:"container",children:[s.jsxs("div",{className:"row ",style:{color:"#c59846",padding:"20px 0px"},children:[s.jsx("div",{className:"col-1 d-none d-md-block "}),s.jsx("div",{className:"col-2",children:s.jsx("h6",{className:"fw-bold",children:"Name"})}),s.jsx("div",{className:"col-3",children:s.jsx("h6",{className:"fw-bold",children:"Email"})}),s.jsx("div",{className:"col-3",children:s.jsx("h6",{className:"fw-bold",children:"BackOffice ID"})}),s.jsx("div",{className:"col-3",children:s.jsx("h6",{className:"fw-bold",children:"Status"})})]}),u==null?void 0:u.data.map(e=>e.hasParent?"":s.jsxs("div",{className:"row fs-small fw-semibold position-relative mt-2 py-3 rounded-3 text-black align-items-center table-row",children:[s.jsx("div",{className:"col-1 p-0 ps-1 p-md-2 d-none d-md-block ",children:s.jsx("div",{className:"icon",children:s.jsx("i",{className:"fa-solid fa-user text-main"})})}),s.jsx("div",{className:"col-4 col-md-2 p-0 ps-1 p-md-2",children:s.jsx("div",{className:"",children:s.jsx("p",{className:"m-0",children:e.name})})}),s.jsx("div",{className:"col-3 p-0 ps-1 p-md-2 ",children:s.jsx("div",{className:" w-100",children:s.jsx("p",{className:"m-0  w-100",children:e.email})})}),s.jsx("div",{className:"col-3 p-0 ps-1 p-md-2 ",children:s.jsx("div",{className:"",children:s.jsx("p",{className:"m-0 fw-bolder",children:e.backOfficeId})})}),s.jsx("div",{className:"col-3 p-0 ps-1 p-md-2",children:s.jsx("div",{className:"fs-6",children:s.jsx("div",{className:"d-flex align-items-center",children:e.status==="Active"&&!e.hasParent?s.jsxs("button",{onClick:()=>U(e.customerAttributeId),type:"button",className:"btn d-flex align-items-center gap-1 border-0 p-0 me-1 text-black fs-small text-main  ",children:[s.jsx("i",{className:`fa-solid fa-${f==e.customerAttributeId?"chevron-down":"chevron-right"}`}),s.jsx("p",{className:"m-0 fs-small",children:e.status})]}):s.jsx("p",{className:"m-0 fs-small",children:e.status})})})}),s.jsx("form",{className:"position-relative",onSubmit:i.handleSubmit,children:s.jsxs("div",{className:`${f==e.customerAttributeId?"d-block":"d-none"} pop-up rounded-3  shadow-lg w-100 me-5`,children:[s.jsx("div",{className:"close",children:s.jsx("button",{onClick:L,type:"button",className:"btn border-0 fs-5 position-absolute top-0 end-0 ",children:s.jsx("i",{className:"fa-solid fa-close me-3"})})}),s.jsx("h6",{className:"text-danger fw-bold ps-3 mt-2",children:"Active"}),s.jsxs("div",{className:"mb-3 text-start ps-3",children:[s.jsx("label",{htmlFor:"parentId",className:"form-label",children:"Upline ID"}),s.jsx("div",{className:"sponser ",children:s.jsxs("div",{className:"row",children:[s.jsxs("div",{className:"col-9",children:[s.jsx("input",{onChange:i.handleChange,name:"parentId",type:"text",className:"form-control text-black",id:"parentId"}),s.jsx("div",{className:"text-main fw-bolder fs-small",children:y})]}),s.jsx("div",{className:"col-3",children:s.jsx("button",{onClick:F,type:"button",className:"btn bg-grdient",children:"Search"})})]})})]}),s.jsxs("div",{className:"mb-1 ps-3",children:[s.jsx("label",{htmlFor:"handSide",className:"form-label",children:"Choose Hand Side"}),s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-9",children:s.jsxs("div",{className:"position-relative rounded-3 border py-2 border-black",children:[s.jsx("span",{children:b}),s.jsxs("div",{className:"position-absolute end-0 top-50 translate-middle-y ",children:[s.jsx("button",{disabled:t,onClick:()=>N("Left"),type:"button",className:`btn p-0 border-0 ${t?"":"ts-zezag"}`,children:s.jsx("i",{className:"fa-solid fa-caret-left fs-5"})}),s.jsx("button",{disabled:n,onClick:()=>N("Right"),type:"button",className:`btn p-0 me-2 border-0 ${n?"":"ts-zezag"}`,children:s.jsx("i",{className:"fa-solid fa-caret-right fs-5"})})]})]})})})]}),s.jsx("button",{disabled:t&&n,type:"submit",className:"btn bg-grdient d-block w-50 m-auto mt-3 border-0",children:"Submit"})]})})]},e.customerAttributeId))]})})})}export{Y as default};
