import{r as m,j as e,d as b,f as u,g as p,h,c as f,i as g,e as N,A as y,q as v}from"./index-rN5JyR99.js";import{B as x,D as w,a as D,b as I}from"./Typography-YVUBnHeO.js";import{D as C}from"./DialogTitle-BbVweCPi.js";const S=({percentage:t})=>{const[l,c]=m.useState(0),i=a=>{const o=Math.min(Math.max(a,0),100);c(o)},s=60,n=2*Math.PI*s,r=n-l/100*n;return m.useEffect(()=>{i(t)},[t]),e.jsxs("svg",{className:"progress-circle",width:150,height:150,children:[e.jsx("circle",{className:"progress-circle-background",cx:"75",cy:"75",r:s}),e.jsx("circle",{className:"progress-circle-progress",cx:"75",cy:"75",r:s,style:{strokeDasharray:n,strokeDashoffset:r}})]})};function E({userId:t,refetchDataUser:l}){const c=async(n,r)=>{try{const a=new FormData;a.append("file",n.file);const o=await u.post(`${p}/User/AddUserImg?userId=${r}`,a);l(),h.success("Image Added Successfully")}catch(a){console.log(a),h.error("You have problem")}},i=b({initialValues:{file:""},onSubmit:n=>{c(n,t)}}),s=n=>{n.currentTarget.files&&i.setFieldValue("file",n.currentTarget.files[0]),i.submitForm()};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"control-img-profile position-relative overflow-hidden",children:[e.jsx("button",{className:"rounded-circle bg-main-color text-main border-0",children:e.jsx("i",{className:"fa-solid fa-camera"})}),e.jsx("div",{className:"position-absolute top-0 opacity-0",children:e.jsx("input",{onChange:s,type:"file",className:"form-control-file",name:"file",id:"file"})})]})})}function k({refetchDataUser:t,dataUser:l}){const[c,i]=m.useState(!1),s=()=>{i(!0)},n=()=>{i(!1)},r=o=>{u.put(`${p}/User/EditUserData`,o).then(d=>{t(),h.success("Edit Data User Success"),n()}).catch(d=>{console.log(d),h.error("You have a problem")})},a=b({initialValues:{userId:l==null?void 0:l.data.id,mobileNumber:l==null?void 0:l.data.mobile,whatsAppNumber:l==null?void 0:l.data.whatsappmobile,email:l==null?void 0:l.data.email},onSubmit:o=>{console.log(o),r(o)}});return e.jsxs(f.Fragment,{children:[e.jsx(x,{variant:"outlined",className:"text-black text-capitalize fw-bold border-0 ",onClick:s,children:"Edite"}),e.jsxs(w,{open:c,onClose:n,children:[e.jsx(C,{className:"bg-main-color ",children:"Edite your information"}),e.jsx(D,{className:"bg-main-color",style:{width:"clamp(340px,50vw,500px)"},children:e.jsxs("form",{onChange:a.handleChange,onSubmit:a.handleSubmit,className:"",children:[e.jsx("div",{className:"row mt-4",children:e.jsx("div",{className:"col-12",children:e.jsx("input",{required:!0,onChange:a.handleChange,type:"tel",className:"form-control",placeholder:"Mobile Number",name:"mobileNumber",value:a.values.mobileNumber})})}),e.jsx("div",{className:"row mt-4",children:e.jsx("div",{className:"col-12",children:e.jsx("input",{required:!0,onChange:a.handleChange,type:"tel",className:"form-control",placeholder:"WhatsApp Number",name:"whatsAppNumber",value:a.values.whatsAppNumber})})}),e.jsx("div",{className:"row mt-4",children:e.jsx("div",{className:"col-12",children:e.jsx("input",{required:!0,onChange:a.handleChange,type:"email",className:"form-control",placeholder:"Email",name:"email",value:a.values.email})})}),e.jsxs(I,{className:"bg-main-color mt-4 pt-3 border-top",children:[e.jsx(x,{className:"",onClick:n,children:"Cancel"}),e.jsx(x,{className:"",type:"submit",children:"Submit"})]})]})})]})]})}const A=({refetchDataUser:t,dataUser:l})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"dropdown",children:[e.jsx("button",{className:"btn p-0 border-0 ",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",children:e.jsx("i",{className:"fa-solid fa-ellipsis-vertical"})}),e.jsx("div",{className:"dropdown-menu p-0 w-25 ","aria-labelledby":"dropdownMenuButton",children:e.jsx("div",{className:"dropdown-item bg-body",value:"",children:e.jsx(k,{dataUser:l,refetchDataUser:t})})})]})});function B(){var a,o,d;const t=JSON.parse(localStorage.getItem("dataAuth")).customerAttributeId,[l,c]=m.useState(0),i=j=>u.get(`${p}/User/GetUserDetails?userId=${j}`),{data:s,isLoading:n,refetch:r}=g("getUserDetails",()=>i(t),{refetchInterval:!1});return console.log(s==null?void 0:s.data),s?e.jsx(e.Fragment,{children:e.jsx("section",{className:"my-profile mt-4",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row gy-4 justify-content-center",children:e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"box-prof",children:[e.jsxs("div",{className:"head-box-prof d-flex justify-content-between",children:[e.jsx("h6",{className:"my-fw-bold",children:"Personal Information"}),e.jsx("div",{className:"control",children:e.jsx(A,{dataUser:s,refetchDataUser:r})})]}),e.jsxs("div",{className:"img-prof mt-4 position-relative d-flex align-items-center justify-content-center",children:[e.jsx("div",{className:"progressCi",children:e.jsx(S,{percentage:50})}),e.jsx(y,{sx:{width:100,height:100,background:""},alt:(a=s==null?void 0:s.data)==null?void 0:a.nameEn,src:(o=s==null?void 0:s.data)==null?void 0:o.pictureUrl}),e.jsx("div",{className:"edit-img-prof",children:e.jsx(E,{refetchDataUser:r,userId:t})})]}),e.jsxs("div",{className:"desc-profile my-fw-bold mt-5 mb-3",children:[e.jsx("h5",{className:"my-fw-bold text-center",children:(d=s==null?void 0:s.data)==null?void 0:d.nameEn}),e.jsxs("div",{className:"border-bottom py-2 d-flex justify-content-between",children:[e.jsx("label",{children:"ID"}),e.jsx("span",{children:s==null?void 0:s.data.backOfficeId})]}),e.jsxs("div",{className:"border-bottom py-2 d-flex justify-content-between",children:[e.jsx("label",{children:"Email"}),e.jsx("span",{children:s==null?void 0:s.data.email})]}),e.jsxs("div",{className:"border-bottom py-2 d-flex justify-content-between",children:[e.jsx("label",{children:"ID Sponsor"}),e.jsx("span",{children:s==null?void 0:s.data.sponsorId})]}),e.jsxs("div",{className:"border-bottom py-2 d-flex justify-content-between",children:[e.jsx("label",{children:"Country Name"}),e.jsx("span",{children:s==null?void 0:s.data.countryName})]}),e.jsxs("div",{className:"border-bottom py-2 d-flex justify-content-between",children:[e.jsx("label",{children:"Start Date"}),e.jsx("span",{children:s?v(new Date(s==null?void 0:s.data.startDate),"MMM d, y h:m a"):""})]}),e.jsxs("div",{className:"border-bottom py-2 d-flex justify-content-between",children:[e.jsx("label",{children:"Your Role"}),e.jsx("span",{children:s==null?void 0:s.data.role})]}),e.jsxs("div",{className:"border-bottom py-2 d-flex justify-content-between",children:[e.jsx("label",{children:"Mobile"}),e.jsx("span",{children:s==null?void 0:s.data.mobile})]}),e.jsxs("div",{className:"border-bottom py-2 d-flex justify-content-between",children:[e.jsx("label",{children:"Whatsapp Mobile"}),e.jsx("span",{children:s==null?void 0:s.data.whatsappmobile})]}),e.jsxs("div",{className:"border-bottom py-2 d-flex justify-content-between",children:[e.jsx("label",{children:"National Id"}),e.jsx("span",{children:(s==null?void 0:s.data.nationalId)||"No Rank"})]})]})]})})})})})}):e.jsx(N,{})}export{B as default};
