import{r,S as v,d as S,j as e,B as O,f as j,g,h as b,i as C,c as L,u as q,e as M,q as A}from"./index-rN5JyR99.js";import{c as P,b as $,a as F}from"./index.esm-CXOl1EUC.js";import{B,D as R,a as W,b as G}from"./Typography-YVUBnHeO.js";import{D as V}from"./DialogTitle-BbVweCPi.js";const U="/assets/dragAndDrop-B3MZlcia.png",E=P().shape({methodid:F().required("Required"),cardNumber:F().required("Required"),nationalIdback:$().required("Upload Image for back!").test("fileType","Upload image for back!",n=>n?["image/jpeg","image/png","image/jpg"].includes(n.type):!1),nationalIdfront:$().required("Upload Image for front!").test("fileType","Upload image for front!",n=>n?["image/jpeg","image/png","image/jpg"].includes(n.type):!1)});function _(){const n=JSON.parse(localStorage.dataAuth).customerAttributeId,[i,c]=r.useState(!1),{setConfirmOtpShow:m}=r.useContext(v),[x,d]=r.useState(""),[s,a]=r.useState(""),t=S({initialValues:{userid:n,methodid:"",cardNumber:"",nationalIdfront:null,nationalIdback:null},validationSchema:E,onSubmit:async o=>{c(!0);try{const l=new FormData;l.append("userid",o.userid),l.append("methodid",o.methodid),l.append("cardNumber",o.cardNumber),l.append("nationalIdback",o.nationalIdback),l.append("nationalIdfront",o.nationalIdfront);const w=await j.post(`${g}/CustomerInfo/addnewcashbackmethodAndNationdId`,l);console.log(w.data),m("d-block"),b.success("Files uploaded successfully")}catch(l){console.error("There was an error uploading the files!",l),b.error(l.response.data||"File upload failed")}finally{c(!1)}}});return e.jsxs("form",{onSubmit:t.handleSubmit,className:"drag",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"methodid",className:"form-label  my-fw-bold",children:"Method"}),e.jsxs("select",{name:"methodid",className:"form-select select-piont py-2",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.methodid,id:"methodid",required:!0,children:[e.jsx("option",{value:"",children:"Select Method"}),e.jsx("option",{value:"1",children:"Binance"})]}),t.touched.methodid&&t.errors.methodid?e.jsx("div",{className:"alert alert-danger py-1 px-2 text-center",children:t.errors.methodid}):null]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"cardNumber",className:"form-label  my-fw-bold",children:"Account Number"}),e.jsx("input",{type:"text",id:"cardNumber",name:"cardNumber",className:"form-control",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.cardNumber,required:!0}),t.touched.cardNumber&&t.errors.cardNumber?e.jsx("div",{className:"alert alert-danger py-1 px-2 text-center",children:t.errors.cardNumber}):null]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"accountNum",className:"form-label  my-fw-bold",children:"Upload Identification card"}),e.jsxs("div",{className:"row gy-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"",children:[e.jsx("label",{htmlFor:"nationalIdfront",className:"form-label  my-fw-bold d-block m-auto text-center",children:"Front"}),e.jsxs("div",{className:"form-group form-control-file",children:[e.jsx("input",{type:"file",className:"form-control-file input-file",name:"nationalIdfront",id:"nationalIdfront",accept:"image/*",onChange:o=>{t.setFieldValue("nationalIdfront",o.currentTarget.files[0]),d(o.currentTarget.files[0].name)},required:!0}),e.jsxs("div",{className:"bg-file position-relative ",style:{height:"250px"},children:[e.jsxs("div",{className:"title position-absolute w-100 text-white",children:[e.jsx("p",{className:"w-100 text-center text-main my-fw-bold position-absolute w-100 top-0 py-2",children:"Drag and Drop"}),e.jsx("p",{className:"fs-small d-block m-auto bg-main-color-2 mb-4 p-1 text-center",children:x})]}),e.jsx("img",{src:U,className:"w-100 h-100 object-fit-fill"})]})]})]}),e.jsx("div",{className:"",children:t.touched.nationalIdfront&&t.errors.nationalIdfront?e.jsx("div",{className:"alert alert-danger py-1 px-2 text-center m-0",children:t.errors.nationalIdfront}):null})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"",children:[e.jsx("label",{htmlFor:"nationalIdback",className:"form-label  my-fw-bold d-block m-auto text-center",children:"Back"}),e.jsxs("div",{className:"form-group form-control-file",children:[e.jsx("input",{type:"file",className:"form-control-file input-file",name:"nationalIdback",id:"nationalIdback",accept:"image/*",onChange:o=>{t.setFieldValue("nationalIdback",o.currentTarget.files[0]),a(o.currentTarget.files[0].name)},required:!0}),e.jsxs("div",{className:"bg-file position-relative",style:{height:"250px"},children:[e.jsxs("div",{className:"title position-absolute w-100 text-white",children:[e.jsx("p",{className:"w-100 text-center text-main my-fw-bold position-absolute w-100 top-0 py-2",children:"Drag and Drop"}),e.jsx("p",{className:"fs-small d-block m-auto bg-main-color-2 mb-4 p-1 text-center",children:s})]}),e.jsx("img",{src:U,className:"w-100 h-100 object-fit-fill"})]})]})]}),e.jsx("div",{className:"",children:t.touched.nationalIdback&&t.errors.nationalIdback?e.jsx("div",{className:"alert alert-danger py-1 px-2 text-center",children:t.errors.nationalIdback}):null})]})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"btn bg-grdient w-50 d-block m-auto mt-3",disabled:i,children:i?e.jsx(O,{color:"#223F4A"}):"Verify"})})]})}const H="/assets/otp-DARiU0U3.png";function J(){const n=JSON.parse(localStorage.dataAuth).customerAttributeId,[i,c]=r.useState(!1),m=async(a,t)=>{await j.put(`${g}/CustomerInfo/ConfirmationOtp?userId=${a}&otp=${t}`).then(o=>{b.success("OTP Verified Successfully"),c(!1),window.location.reload()}).catch(o=>{b.error("Wrong, Resend OTP"),console.log(o),c(!1),s.resetForm()})},x=async a=>{await j.get(`${g}/CustomerInfo/RequestNewOtp?userId=${a}`).then(t=>{t.data,b.success(t.data)}).catch(t=>{b.success(t)})},d=async()=>{await x(n),console.log("Resend")},s=S({initialValues:{otp:"",otp1:"",otp2:"",otp3:"",otp4:"",otp5:"",otp6:""},onSubmit:a=>{a.otp=a.otp1+a.otp2+a.otp3+a.otp4+a.otp5+a.otp6,console.log(a.otp),c(!0),m(n,a.otp),resetForm(),console.log(a)}});return e.jsxs("section",{className:"otp pb-5",children:[e.jsx("h2",{className:"text-white my-fw-bold text-center",children:"OTP"}),e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-12",children:e.jsx("img",{className:"w-100 h-100 object-fit-fill",src:H})})}),e.jsx("div",{className:"row text-center text-white ",children:e.jsxs("div",{className:"col-12",children:[e.jsx("h6",{className:"my-fw-bold ",children:"Enter Verification Code"}),e.jsxs("p",{className:"fs-small",children:["We have sent a  verification code to Your",e.jsx("br",{})," Account Number"]})]})}),e.jsxs("form",{onSubmit:s.handleSubmit,children:[e.jsxs("div",{className:"row text-white mt-2 justify-content-around ",children:[e.jsx("div",{className:"col-2",children:e.jsx("input",{value:s.values.otp1,name:"otp1",onChange:s.handleChange,className:"form-control bg-transparent border-0 shadow-0 rounded-0 p-0 w-100 text-center border-bottom",maxLength:1,type:"text"})}),e.jsx("div",{className:"col-2",children:e.jsx("input",{value:s.values.otp2,name:"otp2",onChange:s.handleChange,className:"form-control bg-transparent border-0 shadow-0 rounded-0 p-0 w-100 text-center border-bottom",maxLength:1,type:"text"})}),e.jsx("div",{className:"col-2",children:e.jsx("input",{value:s.values.otp3,name:"otp3",onChange:s.handleChange,className:"form-control bg-transparent border-0 shadow-0 rounded-0 p-0 w-100 text-center border-bottom",maxLength:1,type:"text"})}),e.jsx("div",{className:"col-2",children:e.jsx("input",{value:s.values.otp4,name:"otp4",onChange:s.handleChange,className:"form-control bg-transparent border-0 shadow-0 rounded-0 p-0 w-100 text-center border-bottom",maxLength:1,type:"text"})}),e.jsx("div",{className:"col-2",children:e.jsx("input",{value:s.values.otp5,name:"otp5",onChange:s.handleChange,className:"form-control bg-transparent border-0 shadow-0 rounded-0 p-0 w-100 text-center border-bottom",maxLength:1,type:"text"})}),e.jsx("div",{className:"col-2",children:e.jsx("input",{value:s.values.otp6,name:"otp6",onChange:s.handleChange,className:"form-control bg-transparent border-0 shadow-0 rounded-0 p-0 w-100 text-center border-bottom",maxLength:1,type:"text"})})]}),e.jsx("div",{className:"",children:e.jsx("button",{type:"submit",className:"btn bg-grdient w-50 d-block m-auto mt-5",children:i?e.jsx(O,{color:"#223F4A"}):"Submit"})}),e.jsx("div",{className:"resend-otp",children:e.jsx("button",{onClick:d,type:"button",className:"btn d-block m-auto fs-small",children:e.jsx("span",{className:"text-white",children:"Resend OTP"})})})]})]})]})}function z(){const{togglePopUpBankWall:n,setTogglePopUpBankWall:i}=r.useContext(v),{showPopUp:c,setShowPopUp:m}=r.useContext(v),{confirmOtpShow:x,setConfirmOtpShow:d}=r.useContext(v),s=()=>{n?(m("d-block"),i(!n)):(m("d-none"),i(!n))};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"pt-2 pb-4",children:e.jsxs("div",{className:"",children:[e.jsx("div",{className:"close d-flex justify-content-end",children:e.jsx("button",{onClick:s,className:"btn text-white border-0 bg-grdient mx-2",children:"X"})}),e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"row d-flex justify-content-center mt-4",children:[e.jsx("div",{className:`${x==="d-block"?"d-none":"d-block"} col-md-10`,children:e.jsx(_,{})}),e.jsx("div",{className:`${x} col-md-10`,children:e.jsx(J,{})})]})})})})]})})})}function Q({customerAttributeId:n}){const[i,c]=r.useState(!1),[m,x]=r.useState(!1),d=JSON.parse(localStorage.dataAuth).binance_account,s=h=>j.get(`${g}/BankController/GetBalance?userId=${h}`),{data:a,isLoading:t}=C("getBalance",()=>s(n),{refetchOnMount:!1,refetchOnWindowFocus:!1,refetchInterval:!1}),o=async h=>{x(!0),await j.get(`${g}/BankController/RequestCash?balanceId=${h}`).then(k=>{b.success("Successfully requested cash!")}).catch(k=>{b.error(k.response.data)}),x(!1)},l=async()=>{a!=null&&a.data.id?(await o(a==null?void 0:a.data.id),window.location.reload()):b.error("No balance found!")},w=()=>{const h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],I=new Date().getDay();return h[I]},[y,N]=r.useState(w()),p=()=>j.get(`${g}/Cashbackvisability/GetAll`),{data:f}=C("daysCashBack",p,{refetchOnMount:!1,refetchOnWindowFocus:!1,refetchInterval:!1});return r.useEffect(()=>{if(f)for(const h of f==null?void 0:f.data)h.isActive===!0&&y===h.day&&c(!0)},[f]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"transfer",children:e.jsx("button",{disabled:!i||!d,onClick:l,type:"button",className:"btn bg-grdient",children:m?e.jsx(O,{}):"Request Cash"})})})}function X({refetchAllTrainng:n}){const[i,c]=r.useState(!1),[m,x]=r.useState(JSON.parse(localStorage.getItem("dataAuth")).customerAttributeId),d=()=>{c(!0)},s=()=>{c(!1)},a=N=>j.get(`${g}/CustomerInfo/GetBinanceAccount?customerId=${N}`),{data:t,isLoading:o,refetch:l}=C("getBinanceAccount",()=>a(m),{refetchOnWindowFocus:!1,refetchOnMount:!1,refetchInterval:!1}),w=N=>{j.put(`${g}/CustomerInfo/EditBinanceAccount?customerId=${N.customerId}&&accountNumber=${N.accountNumber}`).then(({data:p})=>{console.log(p),b.success(p),l(),s()}).catch(p=>{console.log(p),b.error(p.response.data||"problem")})},y=S({initialValues:{accountNumber:"",customerId:m},onSubmit:N=>{console.log(N),w(N)}});return e.jsxs(L.Fragment,{children:[e.jsx(B,{variant:"outlined",className:"bg-grdient text-capitalize fw-bold border-0 ",onClick:d,children:"Edit Banck Account"}),e.jsxs(R,{open:i,onClose:s,children:[e.jsx(V,{className:"bg-main-color text-white",children:"Banck Account"}),e.jsxs(W,{className:"bg-main-color",children:[e.jsxs("div",{className:"row gy-3 shadow border border-secondary py-2 mt-3",children:[e.jsx("h4",{className:"text-white m-0",children:"National ID"}),e.jsx("div",{className:"col-md-6 ",children:e.jsxs("div",{className:"h-100",children:[e.jsx("h5",{className:"text-white",children:"Front"}),e.jsx("div",{className:"container-img",children:e.jsx("img",{src:t==null?void 0:t.data.frontIdImageUrl,alt:"front"})})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"",children:[e.jsx("h5",{className:"text-white",children:"Back"}),e.jsx("img",{src:t==null?void 0:t.data.backIdImageUrl,alt:"front"})]})})]}),e.jsx("div",{className:"row gy-3 shadow border border-secondary py-2 mt-3",children:e.jsx("div",{className:"col-12 ",children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("h4",{className:"text-white m-0",children:"Binance Number:"}),e.jsx("h4",{className:"my-fw-bold text-white",children:t==null?void 0:t.data.binanceNumber})]})})}),e.jsxs("form",{onChange:y.handleChange,onSubmit:y.handleSubmit,className:"mt-4",children:[e.jsx("h5",{className:"text-white",children:"If you edit your binance number"}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("input",{required:!0,onChange:y.handleChange,type:"text",className:"form-control",name:"accountNumber",placeholder:"Enter New Binance Number"})})}),e.jsxs(G,{className:"bg-main-color mt-4 pt-3 border-top",children:[e.jsx(B,{className:"text-white",onClick:s,children:"Cancel"}),e.jsx(B,{className:"text-white",type:"submit",children:"Save"})]})]})]})]})]})}function te(){const n=JSON.parse(localStorage.getItem("dataAuth")),i=n.name,c=n.customerAttributeId,m=q(),x=u=>j.get(`${g}/User/GetUserDetails?userId=${u}`),{data:d}=C("getUserDetails",()=>x(c),{refetchOnWindowFocus:!1,refetchOnMount:!1,refetchInterval:!1}),s=u=>j.get(`${g}/BankController/GetBalanceHistory?CustomerAttributeId=${u}`),a=u=>j.get(`${g}/User/Get_HoldAmount_and_TotalAmount?customerAttributeId=${u}`),{data:t,isLoading:o}=C("getHoldAmoAndTotalAmo",()=>a(c),{refetchOnMount:!1,refetchOnWindowFocus:!1,refetchInterval:!1}),{data:l,isLoading:w,error:y}=C("GetBalanceHistory",()=>s(c),{refetchOnMount:!1,refetchOnWindowFocus:!1,refetchInterval:!1}),{showPopUp:N,setShowPopUp:p}=r.useContext(v),{togglePopUpBankWall:f,setTogglePopUpBankWall:h}=r.useContext(v),k=()=>{f?(p("d-block"),h(!f)):(p("d-none"),h(!f))},{setConfirmOtpShow:I}=r.useContext(v),D=()=>{I("d-block"),f?(p("d-block"),h(!f)):(p("d-none"),h(!f))},T=()=>{m("/dashboard-user/my-checks")};return w||o?e.jsx(M,{}):e.jsx(e.Fragment,{children:e.jsx("section",{className:"e-wallet mt-4 ",id:"eWallet",children:e.jsxs("div",{className:" container p-0 py-3",children:[e.jsx("div",{className:"actions",children:e.jsxs("div",{className:"d-flex gap-2 gap-md-4 justify-content-end align-items-end flex-column flex-sm-row ",children:[e.jsx("div",{className:"bank-account",children:d!=null&&d.data.isApproved_BinanceAccount?e.jsx(X,{}):d!=null&&d.data.binance_Account?e.jsx("button",{onClick:D,type:"button",className:"btn bg-grdient",children:"Confirme Bank Account"}):e.jsx("button",{onClick:k,type:"button",className:"btn bg-grdient",children:"Bank Accounts"})}),e.jsx("div",{className:"checks",children:e.jsx("button",{onClick:T,type:"button",className:"btn bg-grdient",children:"Checks"})}),e.jsx(Q,{customerAttributeId:c})]})}),e.jsx("div",{className:`container-pop-up-bank mt-5 ${N}`,children:e.jsx("div",{className:"popUp-bank",children:e.jsx(z,{})})}),e.jsx("div",{className:"data mt-5",children:e.jsxs("div",{className:"row gy-4",children:[e.jsx("div",{className:"col-sm-6 col-md-3",children:e.jsxs("div",{className:"card-data",children:[e.jsx("label",{children:"Name"}),e.jsx("p",{children:i})]})}),e.jsx("div",{className:"col-sm-6 col-md-3",children:e.jsxs("div",{className:"card-data card-data2",children:[e.jsx("label",{children:"Hold Amount"}),e.jsxs("p",{children:["$",t==null?void 0:t.data.holdAmount]})]})}),e.jsx("div",{className:"col-sm-6 col-md-3",children:e.jsxs("div",{className:"card-data card-data4",children:[e.jsx("label",{children:"Available Amount"}),e.jsxs("p",{children:["$",t==null?void 0:t.data.holdAmount]})]})}),e.jsx("div",{className:"col-sm-6 col-md-3",children:e.jsxs("div",{className:"card-data card-data3",children:[e.jsx("label",{children:"Total Amount"}),e.jsxs("p",{children:["$",t==null?void 0:t.data.totalAmount]})]})})]})}),e.jsx("div",{className:"table-responsive rounded-3 mt-5",children:e.jsxs("table",{className:"table text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"card-data card-data5 rounded-0 ps-3",children:"Hold Amount"}),e.jsx("th",{scope:"col",children:"Issue Date"}),e.jsx("th",{scope:"col",children:"Release Date"})]})}),e.jsx("tbody",{className:"",children:e.jsxs("tr",{className:" fw-bolder text-center border",children:[e.jsxs("td",{children:["$",t==null?void 0:t.data.holdAmount]}),e.jsx("td",{children:t?A(new Date(t==null?void 0:t.data.from),"MMM d, y h:m a"):""}),e.jsx("td",{children:t?A(new Date(t==null?void 0:t.data.to),"MMM d, y h:m a"):""})]})})]})}),e.jsxs("div",{className:"table-responsive rounded-3 mt-5",children:[e.jsxs("table",{className:"table table-hover table text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"flex-shrink-0",children:"Global Date"}),e.jsx("th",{scope:"col",children:"Type"}),e.jsx("th",{scope:"col",children:"Global Description"}),e.jsx("th",{scope:"col",children:"Debit"}),e.jsx("th",{scope:"col",children:"Credit"}),e.jsx("th",{scope:"col",children:"Balance"})]})}),e.jsx("tbody",{className:"",children:l==null?void 0:l.data.map(u=>e.jsxs("tr",{className:"",children:[e.jsx("td",{className:"",children:u?A(new Date(u.transactionDate),"MMM d, y h:m a"):""}),e.jsx("td",{children:"Adjust"}),e.jsx("td",{children:u.description}),e.jsx("td",{children:u.debit}),e.jsx("td",{children:u.credit}),e.jsx("td",{children:u.balance})]},u.id))})]}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsxs("h2",{className:"",children:[" ",y==null?void 0:y.response.data]})})]})]})})})}export{te as default};
